<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Download SwipSwap — The dating app for your stuff</title>
    <meta
      name="description"
      content="Download the SwipSwap beta for Android or iOS and start trading locally."
    />

    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --bg: #fff;
        --ink: #0f172a;
        --muted: #475569;
        --brand: #00b67a;
        --card: #f8fafc;
        --shadow: 0 12px 40px rgba(2, 8, 23, 0.1);
        --radius: 18px;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto,
          Helvetica, Arial, sans-serif;
        background: var(--bg);
        color: var(--ink);
        text-align: center;
        line-height: 1.6;
      }
      main {
        max-width: 600px;
        margin: 0 auto;
        padding: 80px 24px;
      }
      h1 {
        font-size: 2.2rem;
        margin-bottom: 10px;
      }
      p {
        color: var(--muted);
        margin-bottom: 40px;
      }
      .store-buttons {
        display: flex;
        justify-content: center;
        gap: 16px;
        flex-wrap: wrap;
        margin-bottom: 40px;
      }
      .store-buttons img {
        height: 60px;
        width: auto;
        transition: transform 0.15s ease;
      }
      .store-buttons a:hover img {
        transform: scale(1.03);
      }

      /* QR (desktop only) */
      .qr-desktop {
        margin-top: 24px;
        display: none;
        flex-direction: column;
        align-items: center;
        gap: 10px;
      }
      .qr-label {
        font-size: 0.9rem;
        color: var(--muted);
      }
      .qr-image {
        width: 140px;
        height: auto;
        border-radius: 12px;
        box-shadow: var(--shadow);
      }
      @media (min-width: 768px) {
        .qr-desktop {
          display: flex;
        }
      }
    </style>

    <!-- Google Analytics -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-P1VRQXVXYS"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-P1VRQXVXYS");
    </script>
  </head>

  <body>
    <main>
      <h1>Get SwipSwap</h1>
      <p>Choose your platform to download and start swiping.</p>

      <div class="store-buttons">
        <a
          href="https://play.google.com/store/apps/details?id=com.ricky53.SwipSwap"
          aria-label="Get it on Google Play"
        >
          <img src="images/googleplay.svg" alt="Get it on Google Play" />
        </a>

        <a
          href="https://apps.apple.com/us/app/swipswap-marketplace/id6751117476"
          aria-label="Download on the App Store"
        >
          <img src="images/appstore.svg" alt="Download on the App Store" />
        </a>
      </div>

      <div class="qr-desktop">
        <p class="qr-label">On a computer? Scan to download</p>
        <img
          src="images/downloadQR.png"
          alt="Scan to download SwipSwap"
          class="qr-image"
        />
      </div>

      <p style="margin-top: 40px">
        Questions? Email
        <a href="mailto:info@swipswap.app">info@swipswap.app</a>
      </p>
    </main>

    <footer>
      <div><strong>SwipSwap</strong> — Built in Charlotte.</div>
      <div>© <span id="y"></span> SwipSwap. All rights reserved.</div>
    </footer>

    <script>
      document.getElementById("y").textContent = new Date().getFullYear();
    </script>

    <!-- QR + Redirect Tracking -->
    <script>
      (function () {
        const androidUrl =
          "https://play.google.com/store/apps/details?id=com.ricky53.SwipSwap";
        const iosUrl =
          "https://apps.apple.com/us/app/swipswap-marketplace/id6751117476";

        const params = new URLSearchParams(window.location.search);

        const ua = navigator.userAgent || navigator.vendor || window.opera;
        const isAndroid = /android/i.test(ua);
        const isIOS = /iPad|iPhone|iPod/.test(ua) && !window.MSStream;
        const platform = isAndroid ? "android" : isIOS ? "ios" : "desktop";

        const isQr =
          params.get("src") === "qr" || params.get("utm_source") === "qr";

        // Track QR scan
        if (isQr) {
          gtag("event", "qr_scan", { platform });
        }

        // Auto redirect mobile users
        if (isAndroid || isIOS) {
          const target = isAndroid ? androidUrl : iosUrl;

          gtag("event", "store_redirect", {
            platform,
            destination: isAndroid ? "play_store" : "app_store",
            source: isQr ? "qr" : "web",
          });

          setTimeout(() => {
            window.location.href = target;
          }, 800);
        }
      })();
    </script>
  </body>
</html>
